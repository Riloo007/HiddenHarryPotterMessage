import{t}from"./tooltips-02246339.js";import{i as e,c as n,d as o}from"./SearchModalInit-282825e8.js";import{_ as i,r}from"./runtime-36d0ba27.js";import{g as a}from"./getUnreadNotificationsTotal-21477768.js";import{i as c}from"./GlobalNavigationTracking-cf01e8e4.js";import{e as l}from"./events-26bd72fc.js";import"./tracking-8967809f.js";import"./index-3c341042.js";import"./style-inject.es-c5302e9d.js";function s(t){if(!t)return t;var e=new URL(t);return e.searchParams.get("redirect")?(e.searchParams.set("redirect",window.location.href),e.toString()):t}function u(){var t=document.getElementById("global-navigation-sign-in-link"),e=document.getElementById("global-navigation-register-link"),n=document.getElementById("global-navigation-logout-form"),o=document.getElementById("global-navigation-logout-redirect-input");t instanceof HTMLAnchorElement&&t.setAttribute("href",s(t.href)),e instanceof HTMLAnchorElement&&e.setAttribute("href",s(e.href)),n instanceof HTMLFormElement&&n.setAttribute("action",s(n.action)),o instanceof HTMLInputElement&&(o.value=window.location.href)}var d;function f(){return(f=i(r.mark((function t(){var e,o,i,c;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=document.querySelector(".notifications")){t.next=3;break}return t.abrupt("return");case 3:return o=e.querySelector(".notifications__toggle"),i=e.querySelector(".notifications__counter"),t.next=7,a();case 7:(c=t.sent)&&i&&(i.textContent="".concat(c)),null==o||o.addEventListener("click",(function(t){var o;t.preventDefault(),t.stopPropagation(),null===(o=t.target.closest(".wds-dropdown"))||void 0===o||o.classList.add("wds-is-active"),document.querySelector(".search-modal")&&n(),import("./initNotifications-9c5408b7.js").then((function(t){var n=t.default;d&&d(),d=n(e,c)}))}));case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function g(){var t=document.querySelector(".global-navigation__top"),e=document.querySelector(".global-navigation__bottom");t&&e&&e.classList.toggle("is-overflowing",t.getBoundingClientRect().bottom-10>e.getBoundingClientRect().top)}l.on("FGC_globalnav_Rendered",(function(){var n;document.querySelectorAll(".global-navigation__label").forEach((function(e){e.scrollWidth>e.offsetWidth&&e.textContent&&(e.classList.add("text-overflow"),t.applyTooltip(e,e.textContent,"right"))})),window.addEventListener("GlobalComponentsOnLocationChange",u),u(),window.addEventListener("resize",g),g(),null===(n=document.querySelector(".global-navigation__search"))||void 0===n||n.addEventListener("click",(function(t){t.preventDefault(),t.currentTarget.blur(),e()})),function(){f.apply(this,arguments)}(),c()})),l.on("FGC_globalnav_Destroyed",(function(){window.removeEventListener("GlobalComponentsOnLocationChange",u),window.removeEventListener("resize",g),o(),d&&d()}));
